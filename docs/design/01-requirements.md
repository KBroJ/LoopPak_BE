# 요구사항 명세서
## 📝 개요
루프팩 이커머스는 사용자가 여러 브랜드의 상품을 둘러보고, 마음에 드는 상품에 좋아요를 누르고, 포인트로 결제하는 쇼핑 경험을 제공합니다.
본 문서는 상품, 브랜드, 좋아요, 주문/결제 도메인에 대한 기능 요구사항을 사용자 시나리오 기반으로 정리합니다.


# 기능적 요구사항 (Functional Requirements)

## 1. 브랜드 & 상품 (Brands / Products)
#### < Happy Path >
    ● 상품 목록 조회
        ○ 사용자는 특정 브랜드의 상품을 지정하여 조회할 수 있다.
        ○ 사용자는 상품 목록에서 각 상품의 총 좋아요 수를 확인할 수 있다.
        ○ 사용자는 정렬기준(최신순, 낮은 가격순, 좋아요 많은 순)을 선택하여 상품 목록을 정렬 할 수 있다.
        ○ 사용자는 한 페이지에 보여줄 상품 수(10, 20)를 지정할 수 있다.
        ○ 사용자는 페이지를 선택하여 해당 페이지의 상품 목록을 볼 수 있다.
     
    ● 상품 정보 조회
        ○ 사용자는 상품 목록에서 특정 상품을 선택하여 해당 상품의 정보를 확인할 수 있다.
        ○ 사용자는 상품 정보 화면에서 해당 상품의 총 좋아요 수를 확인할 수 있다.

    ● 브랜드 정보 조회
        ○ 사용자는 특정 브랜드를 선택하여 해당 브랜드의 정보를 확인할 수 있다.

#### < Constraints > - 제약 조건
    ● 상품이 판매중인 경우에만 상품 목록 조회가 가능하다.

#### < Fail Cases > - 실패 케이스
    ● 특정 브랜드/상품 정보 조회 시 존재하지 않으면 오류를 반환한다.


## 2. 좋아요 (Likes)
#### < Happy Path >
    ● 상품 좋아요 등록
        ○ 사용자는 특정 상품에 대하여 좋아요를 등록할 수 있다
        ○ 좋아요가 등록되지 않았을 경우에만 등록할 수 있다.
    
    ● 상품 좋아요 취소
        ○ 사용자는 특정 상품에 대하여 좋아요를 취소할 수 있다.
        ○ 좋아요가 등록되어 있을 경우에만 취소 할 수 있다.
    
    ● 내가 좋아요 한 상품 목록 조회
        ○ 사용자는 해당 사용자의 좋아요 등록 한 상품의 목록을 조회할 수 있다.

#### < Constraints > - 제약 조건
    ● 각 상품에 대해 한 번만 좋아요를 누를 수 있다.
    ● 상품에 대한 좋아요 추가/해제 기능은 멱등하게 동작해야 한다.

#### < Fail Cases > - 실패 케이스
    ● 로그인하지 않은 사용자에게는 오류를 반환한다.

## 3. 주문 / 결제 (Orders)
#### < Happy Path >
    ● 주문 요청
        ○ 사용자는 상품에 대해 주문 요청할 수 있다.
        ○ 수량을 정하여 주문할 수 있다.

    ● 유저의 주문 목록 조회
        ○ 사용자의 주문했던 상품 목록을 조회할 수 있다.
    
    ● 단일 주문 상세 조회
        ○ 주문했던 상품 목록에서 특정 주문을 선택하여 상세 정보를 확인할 수 있다.

#### < Fail Cases > - 실패 케이스
    ● 로그인하지 않은 사용자에게는 오류를 반환한다.
    ● 상품이 판매중이 아니면 오류를 반환한다.
    ● 주문 시점에 상품재고가 부족할 경우 오류를 반환한다.
    ● 상품에 설정된 최대 개수를 넘어가는 요청의 경우 오류를 반환한다.
    ● 사용자의 포인트가 주문금액보다 적을 경우 오류를 발생한다.


# 비기능적 요구사항(Non-Functional Requirements)
- 사용자 인증은 [X-USER-ID] Header 기반으로 처리된다.
- 오류 상황에서는 명확한 HTTP 상태코드와 에러메세지를 반환해야 한다.

### ※ 오류 코드 정의

| 케이스                | 설명                          | HTTP 상태코드 | 에러 메시지                |
|--------------------|-----------------------------|---------------|-----------------------|
| 미로그인               | 인증 헤더 없음                    | 401 UNAUTHORIZED | "로그인이 필요한 서비스입니다."    |
| 상품 미존재             | 잘못된 productId               | 404 NOT FOUND | "상품을 찾을 수 없습니다."      |
| 브랜드 미존재            | 잘못된 brandId                 | 404 NOT FOUND | "브랜드를 찾을 수 없습니다."     |
| 상품이 판매중 상태가 아님     | 상품이 판매중 외 상태 (일시품절, 판매중단 등) | 409 CONFLICT | "현재 판매 중이 아닌 상품입니다."  |
| 상품 재고 부족           | 주문수보다 상품재고가 부족한 상태          | 409 CONFLICT | "재고가 부족합니다."          |
| 최대 개수를 넘어감 | 상품에 설정된 최대 개수를 넘어감 | 400 BAD REQUEST | "잘못된 요청입니다."          |
| 상품 조회 중 예외         | DB 연결 실패, 시스템 오류            | 500 INTERNAL SERVER ERROR | "상품 조회 중 오류가 발생했습니다." |
